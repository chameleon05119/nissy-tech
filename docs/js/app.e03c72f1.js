(function(){"use strict";var t={2007:function(t,e,i){var o=i(6369),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-wrapper",attrs:{id:"app"}},[e("nav",{staticClass:"home-nav"},[e("router-link",{attrs:{to:"/"}},[t._v("ホーム")]),e("router-link",{attrs:{to:"/model-viewer/demo"}},[t._v("グリグリ (model-viewer)")]),e("router-link",{attrs:{to:"/babylonjs/demo"}},[t._v("グリグリ (babylonjs)")]),e("router-link",{attrs:{to:"/model-viewer/heat-map-3d"}},[t._v("ヒートマップ")])],1),e("router-view",{staticClass:"contents"})],1)},a=[],s=i(1001),r={},l=(0,s.Z)(r,n,a,!1,null,null,null),d=l.exports,c=i(2631),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("h1",[t._v("にっしーの技術ノート")]),e("ul",{staticClass:"page-box-list"},t._l(t.pages,(function(i){return e("li",{key:`page-${i.key}`},[e("router-link",{attrs:{to:i.to}},[e("div",{staticClass:"page-box"},[e("img",{staticClass:"page-box-img",attrs:{src:i.thumbnail,alt:i.key,width:"250",height:"250"}}),e("div",{staticClass:"page-box-detail"},[e("h2",{staticClass:"page-box-title"},[t._v(t._s(i.title))]),e("p",{staticClass:"page-box-text"},[t._v(t._s(i.detail))])])])])],1)})),0)])},h=[],m={name:"HomeView",data(){return{pages:[{key:"model-viewer-demo",to:"/model-viewer/demo",thumbnail:"assets/images/thumbnail-model-viewer.jpg",title:"3D家具グリグリ (model-viewer)",detail:"お客さんが家具を360度自由に見られる技術を紹介！\n購買意欲を搔き立てること間違いなし！"},{key:"babylonjs-demo",to:"/babylonjs/demo",thumbnail:"assets/images/thumbnail-model-viewer.jpg",title:"3D家具グリグリ (babylon.js)",detail:"お客さんが家具のどこを注目しているか分析するための技術を紹介！\n商品開発の助けになるかも？"},{key:"heat-map-3d",to:"/model-viewer/heat-map-3d",thumbnail:"assets/images/thumbnail-heat-map-3d.jpg",title:"グリグリを使った3Dヒートマップ",detail:"お客さんが家具のどこを注目しているか分析するための技術を紹介！\n商品開発の助けになるかも？"}]}}},p=m,v=(0,s.Z)(p,u,h,!1,null,null,null),b=v.exports,f=function(){var t=this,e=t._self._c;return e("div",[e("section",{staticClass:"introduction"},[e("h1",{staticClass:"page-title"},[t._v("グリグリを使った3Dヒートマップ")]),e("h2",{staticClass:"introduction-title"},[t._v("技術紹介")]),e("div",{staticClass:"introduction-top-wrapper"},[e("div",{staticClass:"introduction-top-inner"},[t.isMounted?e("model-viewer",{staticClass:"model-viewer",attrs:{id:"heat-map-3d-demo",src:"assets/models/model.glb","camera-controls":""}}):t._e(),e("p",{staticClass:"introduction-top-text",attrs:{id:"search-text",hidden:""}},[t._v("計測中..")]),e("div",{staticClass:"introduction-btn-wrapper"},[e("button",{staticClass:"introduction-btn",attrs:{id:"start-btn"},on:{click:function(e){return t.startMeasuremunt()}}},[t._v("計測を開始")]),e("button",{staticClass:"introduction-btn",attrs:{id:"stop-btn",disabled:""},on:{click:function(e){return t.stopMeasuremunt()}}},[t._v("計測を終了")])])],1),e("div",{staticClass:"introduction-score-wrapper"},[e("h3",[t._v("ユーザーが閲覧した割合")]),e("ul",{staticClass:"introduction-score-list"},t._l(t.scores,(function(i){return e("li",{key:i.key,class:`introduction-score-itme-${i.key}`},[e("style",{tag:"component"},[t._v(" .introduction-score-itme-"+t._s(i.key)+"{ color: rgb("+t._s(i.color[0])+","+t._s(i.color[1])+","+t._s(i.color[2])+"); } ")]),t._v(" "+t._s(i.name)+"："+t._s(i.value)+" % ")],1)})),0),t._m(0)])])])])},y=[function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("操作説明")]),e("ul",{staticClass:"introduction-detail-list"},[e("li",[t._v(" 計測を開始ボタンを押す ")]),e("li",[t._v(" 好きなだけキューブをグリグリする ")]),e("li",[t._v(" 計測を終了ボタンを押す ")]),e("li",[t._v(" キューブの面に、その面を見た時間の長さに応じたヒートマップが生成される ")])])])}],g={name:"HeatMap3d",data(){return{isMounted:!1,timer:null,deltaTime:100,thetaArray:[],phiArray:[],scores:[{key:"front",name:"正面",value:0,color:[0,0,0]},{key:"back",name:"裏面",value:0,color:[0,0,0]},{key:"right",name:"右面",value:0,color:[0,0,0]},{key:"left",name:"左面",value:0,color:[0,0,0]},{key:"up",name:"上面",value:0,color:[0,0,0]},{key:"down",name:"下面",value:0,color:[0,0,0]}]}},methods:{startMeasuremunt(){document.getElementById("start-btn").disabled=!0,document.getElementById("stop-btn").disabled=!1,document.getElementById("search-text").hidden=!1,this.resetMaterialColor(),this.timer=window.setInterval((()=>{this.getCameraLocation()}),100)},stopMeasuremunt(){document.getElementById("start-btn").disabled=!1,document.getElementById("stop-btn").disabled=!0,document.getElementById("search-text").hidden=!0,clearInterval(this.timer),this.time=null,this.scores[0].value=this.calculateFrontScore(),this.scores[1].value=this.calculateBackScore(),this.scores[2].value=this.calculateRightScore(),this.scores[3].value=this.calculateLeftScore(),[this.scores[4].value,this.scores[5].value]=this.calculateUpDownScore(),this.scoreToColor(),this.setMaterialColor(),this.NormalizeScore(),this.thetaArray=[],this.phiArray=[]},getCameraLocation(){const t=document.querySelector("model-viewer#heat-map-3d-demo"),e=t.getCameraOrbit().theta,i=t.getCameraOrbit().phi,o=this.convertTheta(e),n=this.convertPhi(i);this.thetaArray.push(o),this.phiArray.push(n)},convertTheta(t){let e=2-2*(t/Math.PI/2-Math.floor(t/Math.PI/2));return e>1&&(e-=2),e=Math.floor(100*e)/100,e},convertPhi(t){let e=2*(t/Math.PI/2-Math.floor(t/Math.PI/2));return e>1&&(e-=2),e=Math.floor(100*e)/100,e},calculateFrontScore(){let t=0;for(let e=0;e<this.thetaArray.length;e++){let i=0,o=0;Math.abs(this.thetaArray[e])<.5&&(i=Math.cos(this.thetaArray[e]*Math.PI)),Math.abs(this.phiArray[e])>0&&Math.abs(this.phiArray[e])<1&&(o=Math.sin(this.phiArray[e]*Math.PI)),t+=i*o}return t/=this.thetaArray.length,t},calculateBackScore(){let t=0;for(let e=0;e<this.thetaArray.length;e++){let i=0,o=0;Math.abs(this.thetaArray[e])>.5&&(i=-Math.cos(this.thetaArray[e]*Math.PI)),Math.abs(this.phiArray[e])>0&&Math.abs(this.phiArray[e])<1&&(o=Math.sin(this.phiArray[e]*Math.PI)),t+=i*o}return t/=this.thetaArray.length,t},calculateRightScore(){let t=0;for(let e=0;e<this.thetaArray.length;e++){let i=0,o=0;this.thetaArray[e]>0&&(i=Math.sin(this.thetaArray[e]*Math.PI)),Math.abs(this.phiArray[e])>0&&Math.abs(this.phiArray[e])<1&&(o=Math.sin(this.phiArray[e]*Math.PI)),t+=i*o}return t/=this.thetaArray.length,t},calculateLeftScore(){let t=0;for(let e=0;e<this.thetaArray.length;e++){let i=0,o=0;this.thetaArray[e]<0&&(i=-Math.sin(this.thetaArray[e]*Math.PI)),Math.abs(this.phiArray[e])>0&&Math.abs(this.phiArray[e])<1&&(o=Math.sin(this.phiArray[e]*Math.PI)),t+=i*o}return t/=this.thetaArray.length,t},calculateUpDownScore(){let t=0,e=0;for(let i=0;i<this.phiArray.length;i++)Math.abs(this.phiArray[i])<.5?t+=Math.cos(this.phiArray[i]*Math.PI):e-=Math.cos(this.phiArray[i]*Math.PI);return t/=this.phiArray.length,e/=this.phiArray.length,[t,e]},scoreToColor(){const t=Math.max(this.scores[0].value,this.scores[1].value,this.scores[2].value,this.scores[3].value,this.scores[4].value,this.scores[5].value);for(let e=0;e<this.scores.length;e++){const i=this.scores[e].value/t;let o=0,n=0,a=0;i>=.5&&(o=255*(2*i-1)),i>=.25&&i<=.5?n=510*i:i>.5&&i<=.75&&(n=255*(-2*i+2)),i<=.5&&(a=255*(-2*i+1)),this.scores[e].color=[Math.floor(o),Math.floor(n),Math.floor(a)]}},setMaterialColor(){const t=document.querySelector("model-viewer#heat-map-3d-demo");for(let e=0;e<t.model.materials.length;e++){const i=t.model.materials[e];i.pbrMetallicRoughness.setBaseColorFactor([this.scores[e].color[0]/255,this.scores[e].color[1]/255,this.scores[e].color[2]/255])}},resetMaterialColor(){const t=document.querySelector("model-viewer#heat-map-3d-demo");for(let e=0;e<t.model.materials.length;e++){const i=t.model.materials[e];i.pbrMetallicRoughness.setBaseColorFactor([.5,.5,.5])}},NormalizeScore(){let t=0;for(let e=0;e<this.scores.length;e++)t+=this.scores[e].value;for(let e=0;e<this.scores.length;e++)this.scores[e].value=Math.floor(this.scores[e].value/t*100)}},mounted(){this.isMounted=!0,this.loadComponent()},computed:{loadComponent(){return()=>i.e(25).then(i.bind(i,5025))}}},w=g,C=(0,s.Z)(w,f,y,!1,null,"353eac21",null),_=C.exports,x=function(){var t=this,e=t._self._c;return e("div",[e("section",{staticClass:"introduction"},[e("h1",{staticClass:"page-title"},[t._v("3D家具グリグリ")]),e("h2",{staticClass:"introduction-title"},[t._v(" 家具の3Dモデルを表示してユーザーが操作可能！ ")]),e("defaultDemo"),e("defaultRoomDemo"),e("turnTableDemo"),e("exposureDemo"),e("annotationDemo"),e("sizeViewDemo"),e("animationDemo"),e("functionalityAnimation"),e("changeMaterials")],1)])},M=[],S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"default-demo",src:"assets/models/model.glb","camera-controls":"","camera-orbit":"-30deg 60deg","enable-pan":"","touch-action":"none",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5"}}),t._m(0)],1)},V=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("操作説明")]),e("h4",[t._v("-PCの場合-")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" マウスの左クリックをホールドしながら、上下左右に動かすことで家具を回転 ")]),e("li",[t._v(" マウスの右クリックをホールドしながら、上下左右に動かすことで家具を平行移動 ")]),e("li",[t._v(" マウスのホイールで拡大縮小が可能 ")])]),e("h4",[t._v("-スマホの場合-")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" スワイプ操作で家具を回転させることができる ")]),e("li",[t._v(" 2本指で拡大縮小が可能 ")])])])}];const A=()=>i.e(25).then(i.bind(i,5025));var k={name:"defaultDemo",data(){return{modelViewerObj:null}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#default-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t}))}}},z=k,O=(0,s.Z)(z,S,V,!1,null,null,null),P=O.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"room-demo",src:"assets/models/room.glb","camera-controls":"","enable-pan":"",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5","touch-action":"none","camera-target":"0.7m 1m -0.5m","camera-orbit":"60deg 70deg 90%"}}),t._m(0)],1)},$=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("部屋を丸ごと表示することも可能！")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" コーディネートを丸ごと3Dにしてお部屋を覗くことも ")])])])}],B={name:"defaultRoomDemo",data(){return{modelViewerObj:null}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#room-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t}))}}},D=B,Z=(0,s.Z)(D,j,$,!1,null,null,null),E=Z.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"turn-table-demo",src:"assets/models/model.glb","auto-rotate":"","camera-orbit":"-30deg 60deg",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5","rotation-per-second":t.rotateSpeed*Math.PI+"rad"}},[e("div",{staticClass:"model-viewer-rotation-range-bar"},[e("p",{staticClass:"range-bar-text"},[t._v("回転速度: "+t._s(t.rotateSpeed))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.rotateSpeed,expression:"rotateSpeed"}],attrs:{type:"range",min:"-1.2",max:"1.2",step:"0.01"},domProps:{value:t.rotateSpeed},on:{__r:function(e){t.rotateSpeed=e.target.value}}})])]),t._m(0)],1)},L=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("ターンテーブル")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" 回転・拡縮・移動など永続的な動きを加えられる ")]),e("li",[t._v(" この動きはglbファイル内に埋め込まなくとも、フロント側で設定可能 ")])])])}],N={name:"turnTableDemo",data(){return{modelViewerObj:null,rotateSpeed:1}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#default-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t}))}}},X=N,q=(0,s.Z)(X,I,L,!1,null,null,null),T=q.exports,Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"exposure-demo",src:"assets/models/model.glb","camera-controls":"","camera-orbit":"-30deg 60deg","touch-action":"none","enable-pan":"",exposure:t.exposure,"shadow-intensity":"1","shadow-softness":"0.5"}},[e("div",{staticClass:"model-viewer-rotation-range-bar"},[e("p",{staticClass:"range-bar-text"},[t._v("光の強さ(露出):"+t._s(t.exposure))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.exposure,expression:"exposure"}],attrs:{type:"range",min:"0",max:"1",step:"0.01",value:"0.7"},domProps:{value:t.exposure},on:{__r:function(e){t.exposure=e.target.value}}})])]),t._m(0)],1)},H=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("光の強さ(露出)")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" 家具に当たる光の強さを調整することができる ")])])])}],F={name:"exposureDemo",data(){return{modelViewerObj:null,exposure:.7}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#default-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t}))}}},R=F,U=(0,s.Z)(R,Y,H,!1,null,null,null),G=U.exports,W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"annotation-demo",src:"assets/models/model.glb","camera-controls":"","enable-pan":"","touch-action":"none","camera-orbit":"-30deg 60deg",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5"}},[e("button",{attrs:{slot:"hotspot-point1","data-position":"0.38m 0.15m -0.18m","data-normal":"0 0 -1","data-orbit":"150deg 60deg 50%"},on:{click:function(e){t.annotations[0].detailOpen=!t.annotations[0].detailOpen}},slot:"hotspot-point1"},[t.annotations[0].detailOpen?e("span",{staticClass:"annotation1-detail"},[e("span",{staticClass:"annotation1-detail-ttl"},[t._v(t._s(t.annotations[0].ttl))]),e("span",{staticClass:"annotation1-detail-text"},[t._v(t._s(t.annotations[0].detailText))])]):e("span",{staticClass:"annotation1"},[t._v(t._s(t.annotations[0].ttl))])]),e("button",{attrs:{slot:"hotspot-point2","data-position":"0m 0.6m 0.2m","data-normal":"0 0 1","data-orbit":"0deg 90deg"},on:{click:function(e){t.annotations[1].detailOpen=!t.annotations[1].detailOpen}},slot:"hotspot-point2"},[t.annotations[1].detailOpen?e("span",{staticClass:"annotation2-detail"},[e("span",{staticClass:"annotation2-detail-ttl"},[t._v(t._s(t.annotations[1].ttl))]),e("img",{attrs:{src:"assets/images/detail-img01.jpg",alt:"中までテラゾー柄",width:"200",height:"200"}})]):e("span",{staticClass:"annotation2"},[t._v(t._s(t.annotations[1].ttl))])]),e("button",{attrs:{slot:"hotspot-point3","data-position":"0.25m 0.7m -0.18m","data-normal":"0 0 -1","data-orbit":"150deg 60deg 50%"},on:{click:function(e){t.annotations[2].detailOpen=!t.annotations[2].detailOpen}},slot:"hotspot-point3"},[e("div",{staticClass:"annotation-point"}),t.annotations[2].detailOpen?e("span",{staticClass:"annotation1-detail"},[e("span",{staticClass:"annotation1-detail-ttl"},[t._v(t._s(t.annotations[2].ttl))])]):t._e()])]),t._m(0)],1)},J=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("注釈追加")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" 3Dモデル上に注釈を追加でき、家具を回転させると注釈が隠れる ")])])])}],K={name:"defaultDemo",data(){return{modelViewerObj:null,annotations:[{detailOpen:!1,ttl:"コードリール付き！",detailText:"背面のコード穴近くにはコードリールを設け、コード類をスッキリ巻き付けることが出来ます。配線を見せない、美しいリビングづくりに一役買うポイントです。"},{detailOpen:!1,ttl:"中までテラゾー柄！",detailText:"扉収納の内側まで、余すことなくテラゾー柄を使用。表面だけではなく、細かいところまで美しく仕上げました。"},{detailOpen:!1,ttl:"コードスリット付き！",detailText:"天板は飾り棚として使用したり、よく使う小物を置くスペースとして使うのもオススメ！スマホの充電やスタンドライトなどの家電も置けるよう、天板奥にはコードスリットを設けました。"}]}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#annotation-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t,this.setUpHotspot()}))},setUpHotspot(){const t=t=>{let e=t.dataset;this.modelViewerObj.cameraTarget=e.position,this.modelViewerObj.cameraOrbit=e.orbit,this.modelViewerObj.fieldOfView="45deg"};this.modelViewerObj.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(()=>t(e)))}))}}},Q=K,tt=(0,s.Z)(Q,W,J,!1,null,"226b279a",null),et=tt.exports,it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{key:t.selectedModel,staticClass:"model-viewer",attrs:{id:"size-view-demo",src:t.selectedModel,"camera-controls":"","enable-pan":"",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5","camera-orbit":"-30deg 60deg","touch-action":"none"}},[t._l(t.endPoints,(function(i,o){return e("button",{key:`end-point${o}`,staticClass:"end-point",style:"display: "+(t.annotationVisibility?"block":"none"),attrs:{slot:`hotspot-end-point${i.slot}`,"data-normal":i.dataNormal},slot:`hotspot-end-point${i.slot}`})})),t._l(t.sizePanels,(function(i,o){return e("button",{key:`size-panel${o}`,staticClass:"size-panel",style:"display: "+(t.annotationVisibility?"block":"none"),attrs:{slot:`hotspot-size-panel${i.slot}`,"data-normal":i.dataNormal},slot:`hotspot-size-panel${i.slot}`})})),e("div",{staticClass:"toggle-button-wrapper"},[e("div",{staticClass:"toggle-button"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.annotationVisibility,expression:"annotationVisibility"}],staticClass:"toggle-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.annotationVisibility)?t._i(t.annotationVisibility,null)>-1:t.annotationVisibility},on:{change:function(e){var i=t.annotationVisibility,o=e.target,n=!!o.checked;if(Array.isArray(i)){var a=null,s=t._i(i,a);o.checked?s<0&&(t.annotationVisibility=i.concat([a])):s>-1&&(t.annotationVisibility=i.slice(0,s).concat(i.slice(s+1)))}else t.annotationVisibility=n}}}),e("label",{class:t.annotationVisibility?"toggle-label-visible":"toggle-label-hidden",attrs:{for:"toggle"}})])]),e("div",{staticClass:"pulldown-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedModel,expression:"selectedModel"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedModel=e.target.multiple?i:i[0]}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("3Dモデル")]),t._l(t.models,(function(i){return e("option",{key:i.id,domProps:{value:i.name}},[t._v(" "+t._s(i.skuCode)+" ")])}))],2)])],2),t._m(0)],1)},ot=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("操作説明")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" 3Dモデル上に縦・横・高さのサイズを追加でる ")])])])}],nt={name:"sizeViewDemo",data(){return{models:[{id:0,name:"assets/models/model.glb",skuCode:"3HWFL_LXMS8V"},{id:1,name:"assets/models/model2.glb",skuCode:"F201_G1036_1000P1"},{id:2,name:"assets/models/model3.glb",skuCode:"F402_G1027_1000W1"}],selectedModel:"assets/models/model.glb",modelViewerObj:null,annotationVisibility:!1,endPoints:[{slot:"+X-Y+Z",dataNormal:"1 0 1"},{slot:"+X-Y-Z",dataNormal:"1 0 0"},{slot:"+X+Y-Z",dataNormal:"0 1 0"},{slot:"-X+Y-Z",dataNormal:"0 1 0"},{slot:"-X-Y-Z",dataNormal:"-1 0 0"},{slot:"-X-Y+Z",dataNormal:"-1 0 0"}],sizePanels:[{slot:"+X-Y",dataNormal:"1 0 0"},{slot:"+X-Z",dataNormal:"1 0 0"},{slot:"+Y-Z",dataNormal:"0 1 0"},{slot:"-X-Z",dataNormal:"-1 0 0"},{slot:"-X-Y",dataNormal:"-1 0 0"}]}},watch:{async selectedModel(){this.annotationVisibility=!1;const t=t=>new Promise((e=>setTimeout(e,t)));await t(500);const e=document.querySelector("#size-view-demo");this.modelViewerObj=e,this.updateSizeHotspot(this.modelViewerObj),this.annotationVisibility=!0}},computed:{modelCenter(){return this.modelViewerObj.getCameraTarget()}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#size-view-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t})),t.addEventListener("progress",(t=>{1===t.detail.totalProgress&&(this.updateSizeHotspot(this.modelViewerObj),this.annotationVisibility=!0)}))},updateSizeHotspot(t){const e=t.getDimensions(),i=e.x/2,o=e.y/2,n=e.z/2;t.querySelector('button[slot="hotspot-size-panel+X-Y"]').textContent=`${(100*e.z).toFixed(0)} cm`,t.querySelector('button[slot="hotspot-size-panel+X-Z"]').textContent=`${(100*e.y).toFixed(0)} cm`,t.querySelector('button[slot="hotspot-size-panel+Y-Z"]').textContent=`${(100*e.x).toFixed(0)} cm`,t.querySelector('button[slot="hotspot-size-panel-X-Z"]').textContent=`${(100*e.y).toFixed(0)} cm`,t.querySelector('button[slot="hotspot-size-panel-X-Y"]').textContent=`${(100*e.z).toFixed(0)} cm`,t.updateHotspot({name:"hotspot-end-point+X-Y+Z",position:`${this.modelCenter.x+i} ${this.modelCenter.y-o} ${this.modelCenter.z+n}`}),t.updateHotspot({name:"hotspot-size-panel+X-Y",position:`${this.modelCenter.x+1.2*i} ${this.modelCenter.y-1.1*o} ${this.modelCenter.z}`}),t.updateHotspot({name:"hotspot-end-point+X-Y-Z",position:`${this.modelCenter.x+i} ${this.modelCenter.y-o} ${this.modelCenter.z-n}`}),t.updateHotspot({name:"hotspot-size-panel+X-Z",position:`${this.modelCenter.x+1.2*i} ${this.modelCenter.y} ${this.modelCenter.z-1.2*n}`}),t.updateHotspot({name:"hotspot-end-point+X+Y-Z",position:`${this.modelCenter.x+i} ${this.modelCenter.y+o} ${this.modelCenter.z-n}`}),t.updateHotspot({name:"hotspot-size-panel+Y-Z",position:`${this.modelCenter.x} ${this.modelCenter.y+1.1*o} ${this.modelCenter.z-1.1*n}`}),t.updateHotspot({name:"hotspot-end-point-X+Y-Z",position:`${this.modelCenter.x-i} ${this.modelCenter.y+o} ${this.modelCenter.z-n}`}),t.updateHotspot({name:"hotspot-size-panel-X-Z",position:`${this.modelCenter.x-1.2*i} ${this.modelCenter.y} ${this.modelCenter.z-1.2*n}`}),t.updateHotspot({name:"hotspot-end-point-X-Y-Z",position:`${this.modelCenter.x-i} ${this.modelCenter.y-o} ${this.modelCenter.z-n}`}),t.updateHotspot({name:"hotspot-size-panel-X-Y",position:`${this.modelCenter.x-1.2*i} ${this.modelCenter.y-1.1*o} ${this.modelCenter.z}`}),t.updateHotspot({name:"hotspot-end-point-X-Y+Z",position:`${this.modelCenter.x-i} ${this.modelCenter.y-o} ${this.modelCenter.z+n}`})}}},at=nt,st=(0,s.Z)(at,it,ot,!1,null,"0d86bbde",null),rt=st.exports,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"animation-demo",src:"assets/models/model-animation.glb","camera-controls":"","enable-pan":"",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5","camera-orbit":"-30deg 60deg","touch-action":"none"}},t._l(t.animationButtons,(function(i,o){return e("button",{key:`animation-button${o}`,staticClass:"animation-button",style:"display: "+(t.animationButtonVisibility?"block":"none"),attrs:{slot:`hotspot-animation-button${o}`,"data-position":`${i.translation[0]} ${i.translation[1]} ${i.translation[2]}`,"data-normal":"0 0 1"},on:{click:function(e){return t.playAnimationByIndex(o)}},slot:`hotspot-animation-button${o}`})})),0),t._m(0)],1)},dt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("操作説明")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" アニメーションの再生が可能 ")])])])}],ct={name:"animationDemo",data(){return{modelViewerObj:null,animationButtons:[],animationButtonVisibility:!1}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#animation-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t,t.animationLoop=!1,this.tryGetAnimationButtons(this.modelViewerObj)}))},tryGetAnimationButtons(t){t.addEventListener("progress",(e=>{1===e.detail.totalProgress&&(this.getAnimationButtons(t),this.animationButtonVisibility=!0)}))},getAnimationButtons(t){t.originalGltfJson.nodes.forEach((t=>{t.name.indexOf("animation-button")||this.animationButtons.push(t)}))},async playAnimationByIndex(t){await this.disableAllAnimationButtons(),await this.playAnimation(t,this.modelViewerObj),this.enableAllAnimationButtons()},disableAllAnimationButtons(){const t=document.querySelectorAll(".animation-button");t.forEach((t=>{t.disabled=!0}))},enableAllAnimationButtons(){const t=document.querySelectorAll(".animation-button");t.forEach((t=>{t.disabled=!1}))},async playAnimation(t,e){e.animationName=e.availableAnimations[t],e.play()}}},ut=ct,ht=(0,s.Z)(ut,lt,dt,!1,null,"00f2b806",null),mt=ht.exports,pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"functionality-animation-demo",src:"assets/models/functionality-animation.glb","camera-controls":"","enable-pan":"",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5","touch-action":"none","camera-orbit":"-30deg 60deg",autoplay:""}}),t._m(0)],1)},vt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("家具の利用方法もアニメーションに")]),e("ul",{staticClass:"introduction-detail-text"},[e("li",[t._v(" 機能性を推したい家具では、アニメーションを使うことでその用途を効果的に説明可能 ")])])])}],bt={name:"functionalityAnimation",data(){return{modelViewerObj:null}},async mounted(){await A(),this.initModelViewer()},methods:{initModelViewer(){const t=document.querySelector("#functionality-animation-demo");t.addEventListener("load",(()=>{this.modelViewerObj=t}))}}},ft=bt,yt=(0,s.Z)(ft,pt,vt,!1,null,null,null),gt=yt.exports,wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-top-wrapper"},[e("model-viewer",{staticClass:"model-viewer",attrs:{id:"shoes",src:"assets/models/tvboard/tvboard.gltf","camera-controls":"","camera-orbit":"-30deg 60deg","enable-pan":"","touch-action":"none",exposure:"0.7","shadow-intensity":"1","shadow-softness":"0.5"}},[e("div",{staticClass:"controls"},[e("div",[t._v(" Body Variant: "),e("select",{attrs:{id:"body-variant"}})]),e("div",[t._v(" Leg Variant: "),e("select",{attrs:{id:"leg-variant"}})])])]),t._m(0)],1)},Ct=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"introduction-detail"},[e("h3",{staticClass:"introduction-detail-title"},[t._v("操作説明")]),e("p",[t._v("selectorでカラーバリエーションを変更できる")])])}],_t={name:"changeMaterials",data(){return{modelViewerObj:null,bodySelect:null,legSelect:null}},async mounted(){await A(),this.initBodySelector(),this.initLegSelector(),this.initModelViewer()},methods:{initBodySelector(){this.bodySelect=document.querySelector("#body-variant"),this.bodySelect.addEventListener("input",(t=>{const e=t.target.value;this.modelViewerObj.variantName="default"===e?null:e}))},initLegSelector(){this.legSelect=document.querySelector("#leg-variant"),this.legSelect.addEventListener("input",(t=>{const e=t.target.value;this.modelViewerObj.variantName="default"===e?null:e}))},initModelViewer(){const t=document.querySelector("model-viewer#shoes");t.addEventListener("load",(()=>{this.modelViewerObj=t,this.generateVariant()}))},generateVariant(){const t=this.modelViewerObj.availableVariants;t.forEach((t=>{const e=document.createElement("option");e.value=t,e.textContent=t;const i=t.startsWith("body"),o=t.startsWith("leg");i&&this.bodySelect.appendChild(e),o&&this.legSelect.appendChild(e)})),this.bodySelect.value="body_white",this.legSelect="leg_black"}}},xt=_t,Mt=(0,s.Z)(xt,wt,Ct,!1,null,null,null),St=Mt.exports,Vt={name:"ModelViewerDemo",components:{defaultDemo:P,defaultRoomDemo:E,turnTableDemo:T,exposureDemo:G,annotationDemo:et,sizeViewDemo:rt,animationDemo:mt,functionalityAnimation:gt,changeMaterials:St}},At=Vt,kt=(0,s.Z)(At,x,M,!1,null,null,null),zt=kt.exports,Ot=function(){var t=this,e=t._self._c;return e("div",[e("section",{staticClass:"introduction"},[e("h1",{staticClass:"page-title"},[t._v("3D家具グリグリ babylon.js")]),e("h2",{staticClass:"introduction-title"},[t._v("家具の3Dモデルを表示してユーザーが操作可能！")]),e("defaultDemoBabylon"),e("canvas",{attrs:{id:"canvas"}})],1)])},Pt=[],jt=function(){var t=this,e=t._self._c;return e("canvas",{attrs:{id:"canvas"}})},$t=[],Bt=i(1474),Dt=(i(9264),i(5180),{name:"defaultDemoBabylon",data(){return{canvas:null,scene:null,engine:null,camera:null,isUpperPositionCamera:!0,furnitureModels:null,furnitureMesh:null,furnitureMeshes:[],furnitureShadowMesh:null,props:null,objects:[]}},mounted(){this.createScene()},methods:{createScene(){window.addEventListener("load",(()=>{this.canvas=document.getElementById("canvas"),this.engine=new Bt.Engine(this.canvas,!0),this.scene=new Bt.Scene(this.engine),this.scene.clearColor=new Bt.Color3(.96,.95,.94),this.camera=new Bt.ArcRotateCamera("Camera",Math.PI/2,Math.PI/2,2,new Bt.Vector3(0,.8,.1),this.scene),this.cameraSettings(this.camera),this.camera.attachControl(this.canvas,!0);const t=new Bt.HemisphericLight("hemisphericLight",new Bt.Vector3(-1,2,0),this.scene);t.intensity=.8,Bt.SceneLoader.ImportMeshAsync("","assets/models/","model3.glb").then((t=>{const e=t.meshes;this.furnitureMesh=e[1],this.createDummyFurnitureShadow()})),this.engine.runRenderLoop((()=>{this.scene.render()})),this.canvas.addEventListener("click",(t=>this.tryAddProps(t)))}))},cameraSettings(t){t.target=new Bt.Vector3(0,0,0),t.wheelPrecision=50,t.pinchPrecision=700,t.panningSensibility=1e3,t.allowUpsideDown=!1,t.lowerRadiusLimit=.01,t.minZ=.03,t.useNaturalPinchZoom=!0,t.panningInertia=.5,t.inputs.attached.mousewheel.detachControl()},createDummyFurnitureShadow(){const t=this.furnitureMesh.getBoundingInfo().boundingBox,e=t.maximum.subtract(t.minimum),i={x:this.furnitureMesh.position.x,y:0,z:this.furnitureMesh.position.z};this.furnitureShadowMesh=Bt.MeshBuilder.CreateBox("furnitureShadow",{width:e.x,depth:e.z,height:.001},this.scene),this.furnitureShadowMesh.position.x=i.x,this.furnitureShadowMesh.position.y=i.y,this.furnitureShadowMesh.position.z=i.z;const o=new Bt.PBRMaterial("pbr",this.scene);o.ambientColor=new Bt.Color3(.5,.5,.5),o.alpha=.5,this.furnitureShadowMesh.material=o,this.camera.onAfterCheckInputsObservable.add((()=>{this.camera.position.y<0&&this.isUpperPositionCamera?(this.isUpperPositionCamera=!1,this.furnitureShadowMesh.isVisible=!1):this.camera.position.y>=0&&!this.isUpperPositionCamera&&(this.isUpperPositionCamera=!0,this.furnitureShadowMesh.isVisible=!0)}))},tryAddProps(t){const e=this.scene.pick(t.offsetX,t.offsetY),i=e.hit;if(i){const t="furnitureShadow"!==e.pickedMesh.name,i=1===e.getNormal().y,o=this.installableProp(e.pickedPoint);t&&i&&o&&this.addProps(e.pickedPoint)}},installableProp(t){const e=new Bt.MeshBuilder.CreateBox("dummyProp",{size:.1},this.scene);e.position=t,e.position.y+=.05;const i=this.checkInstallable(e,this.furnitureMesh);return e.dispose(),i},checkInstallable(t,e){const i=e.getBoundingInfo().boundingBox,o=i.maximum.subtract(i.minimum),n={x:e.position.x,z:e.position.z},a={xMax:n.x+o.x/2,xMin:n.x-o.x/2,zMax:n.z+o.z/2,zMin:n.z-o.z/2},s=t.getBoundingInfo().boundingBox,r=s.maximum.subtract(s.minimum),l={x:t.position.x,z:t.position.z},d={xMax:l.x+r.x/2,xMin:l.x-r.x/2,zMax:l.z+r.z/2,zMin:l.z-r.z/2};return d.xMax<=a.xMax&&d.xMin>=a.xMin&&d.zMax<=a.zMax&&d.zMin>=a.zMin},addProps(t){this.props?.meshes.forEach((t=>t.dispose())),Bt.SceneLoader.ImportMeshAsync("","assets/models/","plant.glb").then((e=>{this.props=e,this.props.meshes[0].position=t,this.props.meshes[0].position.y-=.05}))}},beforeDestroy(){this.engine.dispose()}}),Zt=Dt,Et=(0,s.Z)(Zt,jt,$t,!1,null,null,null),It=Et.exports,Lt={name:"BabylonjsDemo",components:{defaultDemoBabylon:It}},Nt=Lt,Xt=(0,s.Z)(Nt,Ot,Pt,!1,null,null,null),qt=Xt.exports;o.ZP.use(c.Z);const Tt=[{path:"/",name:"home",component:b},{path:"/model-viewer/heat-map-3d",name:"model-viewer.heat-map-3d",component:_},{path:"/model-viewer/demo",name:"model-viewer.demo",component:zt},{path:"/babylonjs/demo",name:"babylonjs.demo",component:qt}],Yt=new c.Z({base:"",routes:Tt});var Ht=Yt;o.ZP.config.productionTip=!1,new o.ZP({router:Ht,render:t=>t(d)}).$mount("#app")}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,o,n,a){if(!o){var s=1/0;for(c=0;c<t.length;c++){o=t[c][0],n=t[c][1],a=t[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(i.O).every((function(t){return i.O[t](o[l])}))?o.splice(l--,1):(r=!1,a<s&&(s=a));if(r){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,n,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,o){return i.f[o](t,e),e}),[]))}}(),function(){i.u=function(t){return"js/"+t+".e4a0046c.js"}}(),function(){i.miniCssF=function(t){}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="nissy-tech:";i.l=function(o,n,a,s){if(t[o])t[o].push(n);else{var r,l;if(void 0!==a)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==e+a){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.setAttribute("data-webpack",e+a),r.src=o),t[o]=[n];var h=function(e,i){r.onerror=r.onload=null,clearTimeout(m);var n=t[o];if(delete t[o],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(t){return t(i)})),e)return e(i)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p=""}(),function(){var t={143:0};i.f.j=function(e,o){var n=i.o(t,e)?t[e]:void 0;if(0!==n)if(n)o.push(n[2]);else{var a=new Promise((function(i,o){n=t[e]=[i,o]}));o.push(n[2]=a);var s=i.p+i.u(e),r=new Error,l=function(o){if(i.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;r.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",r.name="ChunkLoadError",r.type=a,r.request=s,n[1](r)}};i.l(s,l,"chunk-"+e,e)}},i.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,a,s=o[0],r=o[1],l=o[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var c=l(i)}for(e&&e(o);d<s.length;d++)a=s[d],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(c)},o=self["webpackChunknissy_tech"]=self["webpackChunknissy_tech"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(2007)}));o=i.O(o)})();
//# sourceMappingURL=app.e03c72f1.js.map