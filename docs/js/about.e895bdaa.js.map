{"version":3,"file":"js/about.e895bdaa.js","mappings":"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","sources":["webpack://nissy-tech/./src/views/ModelViewer/HeatMap3d.vue","webpack://nissy-tech/src/views/ModelViewer/HeatMap3d.vue","webpack://nissy-tech/./src/views/ModelViewer/HeatMap3d.vue?475f","webpack://nissy-tech/./src/views/ModelViewer/HeatMap3d.vue?f4d5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"heat-map-3d\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"グリグリを使った3Dヒートマップ\")]),_c('section',{staticClass:\"introduction\"},[_c('h2',[_vm._v(\"技術紹介\")]),_c('div',{staticClass:\"introduction-top-wrapper\"},[_c('div',[(_vm.isMounted)?_c('model-viewer',{staticClass:\"model-viewer\",attrs:{\"id\":\"heat-map-3d-demo\",\"src\":_vm.modelSrc,\"camera-controls\":\"\"}}):_vm._e(),_c('div',{staticClass:\"introduction-btn-wrapper\"},[_c('button',{staticClass:\"introduction-btn\",on:{\"click\":function($event){return _vm.startMeasuremunt()}}},[_vm._v(\"計測を開始\")]),_c('button',{staticClass:\"introduction-btn\",attrs:{\"id\":\"stop-btn\"},on:{\"click\":function($event){return _vm.stopMeasuremunt()}}},[_vm._v(\"計測を終了\")])])],1),_c('ul',{staticClass:\"introduction-score-list\"},_vm._l((_vm.scores),function(score){return _c('li',{key:score.key,class:`introduction-score-itme-${score.key}`},[_c('style',{tag:\"component\"},[_vm._v(\" .introduction-score-itme-\"+_vm._s(score.key)+\"{ color: rgb(\"+_vm._s(score.color[0])+\",\"+_vm._s(score.color[1])+\",\"+_vm._s(score.color[2])+\"); } \")]),_vm._v(\" \"+_vm._s(score.name)+\"：\"+_vm._s(score.value)+\" % \")],1)}),0)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"heat-map-3d\">\n    <h1 class=\"page-title\">グリグリを使った3Dヒートマップ</h1>\n    <section class=\"introduction\">\n      <h2>技術紹介</h2>\n      <div class=\"introduction-top-wrapper\">\n        <div>\n          <model-viewer id=\"heat-map-3d-demo\" v-if=\"isMounted\" :src=\"modelSrc\" camera-controls class=\"model-viewer\">\n          </model-viewer>\n          <div class=\"introduction-btn-wrapper\">\n            <button v-on:click=\"startMeasuremunt()\" class=\"introduction-btn\">計測を開始</button>\n            <button id=\"stop-btn\" v-on:click=\"stopMeasuremunt()\" class=\"introduction-btn\">計測を終了</button>\n          </div>\n        </div>\n        <ul class=\"introduction-score-list\">\n          <li v-for=\"score in scores\" :key=\"score.key\" :class=\"`introduction-score-itme-${score.key}`\">\n            <component :is=\"'style'\">\n              .introduction-score-itme-{{score.key}}{\n                color: rgb({{score.color[0]}},{{score.color[1]}},{{score.color[2]}});\n              }\n            </component>\n            {{score.name}}：{{score.value}} %\n          </li>\n        </ul>\n      </div>\n\n    </section>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'HeatMap3d',\n  data() {\n    return {\n      isMounted: false,\n      modelSrc: '<%= BASE_URL %>assets/models/cube.glb',\n      timer: null,\n      deltaTime: 100,\n      thetaArray: [],\n      phiArray: [],\n      scores:[\n        {\n          key: 'front',\n          name: '正面',\n          value: 0,\n          color: [0,0,0],\n        },\n        {\n          key: 'back',\n          name: '裏面',\n          value: 0,\n          color: [0,0,0],\n        },\n        {\n          key: 'right',\n          name: '右面',\n          value: 0,\n          color: [0,0,0],\n        },\n        {\n          key: 'left',\n          name: '左面',\n          value: 0,\n          color: [0,0,0],\n        },\n        {\n          key: 'up',\n          name: '上面',\n          value: 0,\n          color: [0,0,0],\n        },\n        {\n          key: 'down',\n          name: '下面',\n          value: 0,\n          color: [0,0,0],\n        },\n      ],\n    }\n  },\n  methods:{\n    startMeasuremunt(){\n      this.timer = window.setInterval(()=>{this.getCameraLocation()}, 100);\n    },\n    stopMeasuremunt(){\n      clearInterval(this.timer);\n      this.time = null;\n      this.scores[0].value = this.calculateFrontScore();\n      this.scores[1].value = this.calculateBackScore();\n      this.scores[2].value = this.calculateRightScore();\n      this.scores[3].value = this.calculateLeftScore();\n      [this.scores[4].value, this.scores[5].value] = this.calculateUpDownScore();\n      this.scoreToColor();\n      this.setMaterialColor();\n      this.NormalizeScore();\n      this.thetaArray = [];\n      this.phiArray = [];\n    },\n    getCameraLocation(){\n      const modelviewer01 = document.querySelector('model-viewer#heat-map-3d-demo');\n      \n      const rawTheta = modelviewer01.getCameraOrbit().theta;\n      const rawPhi = modelviewer01.getCameraOrbit().phi;\n      const theta = this.convertAngle(rawTheta);\n      const phi = this.convertAngle(rawPhi);\n\n      this.thetaArray.push(theta)\n      this.phiArray.push(phi)\n    },\n    convertAngle(rawAngle){\n      let angle = Math.abs(rawAngle/Math.PI);\n      angle = 2 * (angle/2 - Math.floor(angle/2));\n      if(angle>1){\n        angle = angle - 2;\n      }\n      angle = Math.floor(100 * angle) / 100;\n\n      return angle;\n    },\n    calculateFrontScore(){\n      let frontScore = 0;\n\n      for(let i=0; i<this.thetaArray.length; i++){\n        let thetaFrontScore = 0;\n        let phiFrontScore = 0;\n\n        if(Math.abs(this.thetaArray[i]) < 0.5){\n          thetaFrontScore = Math.cos(this.thetaArray[i]*Math.PI);\n        }\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\n          phiFrontScore = Math.sin(this.phiArray[i]*Math.PI);\n        }\n        frontScore += thetaFrontScore * phiFrontScore;\n      }\n      frontScore /= this.thetaArray.length;\n      return frontScore;\n    },\n    calculateBackScore(){\n      let backScore = 0;\n\n      for(let i=0; i<this.thetaArray.length; i++){\n        let thetaBackScore = 0;\n        let phiBackScore = 0;\n\n        if(Math.abs(this.thetaArray[i]) > 0.5){\n          thetaBackScore = -Math.cos(this.thetaArray[i]*Math.PI);\n        }\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\n          phiBackScore = Math.sin(this.phiArray[i]*Math.PI);\n        }\n        backScore += thetaBackScore * phiBackScore;\n      }\n      backScore /= this.thetaArray.length;\n      return backScore;\n    },\n    calculateRightScore(){\n      let rightScore = 0;\n\n      for(let i=0; i<this.thetaArray.length; i++){\n        let thetaRightScore = 0;\n        let phiRightScore = 0;\n\n        if(this.thetaArray[i] > 0){\n          thetaRightScore = Math.sin(this.thetaArray[i]*Math.PI);\n        }\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\n          phiRightScore = Math.sin(this.phiArray[i]*Math.PI);\n        }\n        rightScore += thetaRightScore * phiRightScore;\n      }\n      rightScore /= this.thetaArray.length;\n      return rightScore;\n    },\n    calculateLeftScore(){\n      let leftScore = 0;\n\n      for(let i=0; i<this.thetaArray.length; i++){\n        let thetaLeftScore = 0;\n        let phiLeftScore = 0;\n\n        if(this.thetaArray[i] < 0){\n          thetaLeftScore = -Math.sin(this.thetaArray[i]*Math.PI);\n        }\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\n          phiLeftScore = Math.sin(this.phiArray[i]*Math.PI);\n        }\n        leftScore += thetaLeftScore * phiLeftScore;\n        console.log(this.thetaArray[i]);\n      }\n      leftScore /= this.thetaArray.length;\n\n      return leftScore;\n    },\n    calculateUpDownScore(){\n      let upScore = 0;\n      let downScore = 0;\n\n      for(let i=0; i<this.phiArray.length; i++){\n        if(Math.abs(this.phiArray[i]) < 0.5){\n          upScore += Math.cos(this.phiArray[i]*Math.PI);\n        }\n        else{\n          downScore -= Math.cos(this.phiArray[i]*Math.PI);\n        }\n      }\n      upScore /= this.phiArray.length;\n      downScore /= this.phiArray.length;\n\n      return [upScore, downScore];\n    },\n    scoreToColor(){\n      const maxScore = Math.max(this.scores[0].value, this.scores[1].value, this.scores[2].value, this.scores[3].value, this.scores[4].value, this.scores[5].value);\n\n      for(let i = 0; i < this.scores.length; i++){\n        const score = this.scores[i].value/maxScore;\n        let r = 0;\n        let g = 0;\n        let b = 0;\n\n        if(score >= 0.5){\n          r = 255 * (2*score - 1);\n        }\n        if(score >= 0.25 && score <= 0.5){\n          g = 255 * 2*score;\n        }\n        else if(score > 0.5 && score <= 0.75){\n          g = 255 * (-2*score + 2);\n        }\n        if(score <= 0.5){\n          b = 255 * (-2*score + 1);\n        }\n        this.scores[i].color = [Math.floor(r), Math.floor(g), Math.floor(b)];\n      }\n    },\n    setMaterialColor(){\n      const modelviewer01 = document.querySelector('model-viewer#heat-map-3d-demo');\n      for(let i=0; i<modelviewer01.model.materials.length; i++){\n        const flontMaterial = modelviewer01.model.materials[i];\n        flontMaterial.pbrMetallicRoughness.setBaseColorFactor([this.scores[i].color[0]/255,this.scores[i].color[1]/255,this.scores[i].color[2]/255]);\n      }\n    },\n    NormalizeScore(){\n      let TotalScore = 0;\n      for(let i = 0; i < this.scores.length; i++){\n        TotalScore += this.scores[i].value;\n      }\n      for(let i = 0; i < this.scores.length; i++){\n        this.scores[i].value = Math.floor(this.scores[i].value/TotalScore * 100);\n      }\n    },\n  },\n  mounted() {\n    this.isMounted = true;\n    this.loadComponent();\n  },\n  computed: {\n    loadComponent() {\n      return () => import('@google/model-viewer');\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n%container{\n  width: 1284px;\n  margin: 0 auto;\n}\n\n.page-title{\n  @extend %container;\n  padding: 0 40px;\n}\n\n// 技術紹介\n.introduction{\n  @extend %container;\n  padding: 0 40px;\n}\n\n.introduction-top-wrapper{\n  display: flex;\n  column-gap: 80px;\n}\n\n.model-viewer{\n  width: 400px;\n  height: 400px;\n  border: 1px solid #eee;\n  margin-bottom: 20px;\n}\n\n.introduction-btn-wrapper{\n  width: 400px;\n  padding: 20px 0;\n  border: 1px solid #000;\n  border-radius: 20px;\n  display: flex;\n  justify-content: center;\n  column-gap: 30px;\n}\n\n.introduction-btn{\n  font-size: 1.4rem;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.introduction-score-list{\n  display: flex;\n  flex-direction: column;\n  row-gap: 10px;\n  font-size: 1.4rem;\n  text-align: left;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeatMap3d.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeatMap3d.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeatMap3d.vue?vue&type=template&id=1e9e63d4&scoped=true&\"\nimport script from \"./HeatMap3d.vue?vue&type=script&lang=js&\"\nexport * from \"./HeatMap3d.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeatMap3d.vue?vue&type=style&index=0&id=1e9e63d4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e9e63d4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","isMounted","attrs","modelSrc","_e","on","$event","startMeasuremunt","stopMeasuremunt","_l","scores","score","key","class","tag","_s","color","name","value","staticRenderFns","data","timer","deltaTime","thetaArray","phiArray","methods","clearInterval","getCameraLocation","convertAngle","angle","calculateFrontScore","thetaFrontScore","phiFrontScore","frontScore","calculateBackScore","thetaBackScore","phiBackScore","backScore","calculateRightScore","thetaRightScore","phiRightScore","rightScore","calculateLeftScore","thetaLeftScore","phiLeftScore","leftScore","console","calculateUpDownScore","upScore","downScore","scoreToColor","r","g","b","setMaterialColor","flontMaterial","NormalizeScore","TotalScore","mounted","computed","loadComponent","component"],"sourceRoot":""}