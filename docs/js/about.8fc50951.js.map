{"version":3,"file":"js/about.8fc50951.js","mappings":"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","sources":["webpack://nissy-tech/./src/views/ModelViewer/HeatMap3d.vue","webpack://nissy-tech/src/views/ModelViewer/HeatMap3d.vue","webpack://nissy-tech/./src/views/ModelViewer/HeatMap3d.vue?475f","webpack://nissy-tech/./src/views/ModelViewer/HeatMap3d.vue?f4d5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"heat-map-3d\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"グリグリを使った3Dヒートマップ\")]),_c('section',{staticClass:\"introduction\"},[_c('h2',[_vm._v(\"技術紹介\")]),_c('div',{staticClass:\"introduction-top-wrapper\"},[_c('div',[(_vm.isMounted)?_c('model-viewer',{staticClass:\"model-viewer\",attrs:{\"id\":\"heat-map-3d-demo\",\"src\":\"assets/models/cube.glb\",\"camera-controls\":\"\"}}):_vm._e(),_c('div',{staticClass:\"introduction-btn-wrapper\"},[_c('button',{staticClass:\"introduction-btn\",on:{\"click\":function($event){return _vm.startMeasuremunt()}}},[_vm._v(\"計測を開始\")]),_c('button',{staticClass:\"introduction-btn\",attrs:{\"id\":\"stop-btn\"},on:{\"click\":function($event){return _vm.stopMeasuremunt()}}},[_vm._v(\"計測を終了\")])])],1),_c('ul',{staticClass:\"introduction-score-list\"},_vm._l((_vm.scores),function(score){return _c('li',{key:score.key,class:`introduction-score-itme-${score.key}`},[_c('style',{tag:\"component\"},[_vm._v(\" .introduction-score-itme-\"+_vm._s(score.key)+\"{ color: rgb(\"+_vm._s(score.color[0])+\",\"+_vm._s(score.color[1])+\",\"+_vm._s(score.color[2])+\"); } \")]),_vm._v(\" \"+_vm._s(score.name)+\"：\"+_vm._s(score.value)+\" % \")],1)}),0)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"heat-map-3d\">\r\n    <h1 class=\"page-title\">グリグリを使った3Dヒートマップ</h1>\r\n    <section class=\"introduction\">\r\n      <h2>技術紹介</h2>\r\n      <div class=\"introduction-top-wrapper\">\r\n        <div>\r\n          <model-viewer id=\"heat-map-3d-demo\" v-if=\"isMounted\" src=\"assets/models/cube.glb\" camera-controls class=\"model-viewer\">\r\n          </model-viewer>\r\n          <div class=\"introduction-btn-wrapper\">\r\n            <button v-on:click=\"startMeasuremunt()\" class=\"introduction-btn\">計測を開始</button>\r\n            <button id=\"stop-btn\" v-on:click=\"stopMeasuremunt()\" class=\"introduction-btn\">計測を終了</button>\r\n          </div>\r\n        </div>\r\n        <ul class=\"introduction-score-list\">\r\n          <li v-for=\"score in scores\" :key=\"score.key\" :class=\"`introduction-score-itme-${score.key}`\">\r\n            <component :is=\"'style'\">\r\n              .introduction-score-itme-{{score.key}}{\r\n                color: rgb({{score.color[0]}},{{score.color[1]}},{{score.color[2]}});\r\n              }\r\n            </component>\r\n            {{score.name}}：{{score.value}} %\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'HeatMap3d',\r\n  data() {\r\n    return {\r\n      isMounted: false,\r\n      // modelSrc: '/assets/models/cube.glb',\r\n      timer: null,\r\n      deltaTime: 100,\r\n      thetaArray: [],\r\n      phiArray: [],\r\n      scores:[\r\n        {\r\n          key: 'front',\r\n          name: '正面',\r\n          value: 0,\r\n          color: [0,0,0],\r\n        },\r\n        {\r\n          key: 'back',\r\n          name: '裏面',\r\n          value: 0,\r\n          color: [0,0,0],\r\n        },\r\n        {\r\n          key: 'right',\r\n          name: '右面',\r\n          value: 0,\r\n          color: [0,0,0],\r\n        },\r\n        {\r\n          key: 'left',\r\n          name: '左面',\r\n          value: 0,\r\n          color: [0,0,0],\r\n        },\r\n        {\r\n          key: 'up',\r\n          name: '上面',\r\n          value: 0,\r\n          color: [0,0,0],\r\n        },\r\n        {\r\n          key: 'down',\r\n          name: '下面',\r\n          value: 0,\r\n          color: [0,0,0],\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  methods:{\r\n    startMeasuremunt(){\r\n      this.timer = window.setInterval(()=>{this.getCameraLocation()}, 100);\r\n    },\r\n    stopMeasuremunt(){\r\n      clearInterval(this.timer);\r\n      this.time = null;\r\n      this.scores[0].value = this.calculateFrontScore();\r\n      this.scores[1].value = this.calculateBackScore();\r\n      this.scores[2].value = this.calculateRightScore();\r\n      this.scores[3].value = this.calculateLeftScore();\r\n      [this.scores[4].value, this.scores[5].value] = this.calculateUpDownScore();\r\n      this.scoreToColor();\r\n      this.setMaterialColor();\r\n      this.NormalizeScore();\r\n      this.thetaArray = [];\r\n      this.phiArray = [];\r\n    },\r\n    getCameraLocation(){\r\n      const modelviewer01 = document.querySelector('model-viewer#heat-map-3d-demo');\r\n      \r\n      const rawTheta = modelviewer01.getCameraOrbit().theta;\r\n      const rawPhi = modelviewer01.getCameraOrbit().phi;\r\n      const theta = this.convertAngle(rawTheta);\r\n      const phi = this.convertAngle(rawPhi);\r\n\r\n      this.thetaArray.push(theta)\r\n      this.phiArray.push(phi)\r\n    },\r\n    convertAngle(rawAngle){\r\n      let angle = Math.abs(rawAngle/Math.PI);\r\n      angle = 2 * (angle/2 - Math.floor(angle/2));\r\n      if(angle>1){\r\n        angle = angle - 2;\r\n      }\r\n      angle = Math.floor(100 * angle) / 100;\r\n\r\n      return angle;\r\n    },\r\n    calculateFrontScore(){\r\n      let frontScore = 0;\r\n\r\n      for(let i=0; i<this.thetaArray.length; i++){\r\n        let thetaFrontScore = 0;\r\n        let phiFrontScore = 0;\r\n\r\n        if(Math.abs(this.thetaArray[i]) < 0.5){\r\n          thetaFrontScore = Math.cos(this.thetaArray[i]*Math.PI);\r\n        }\r\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\r\n          phiFrontScore = Math.sin(this.phiArray[i]*Math.PI);\r\n        }\r\n        frontScore += thetaFrontScore * phiFrontScore;\r\n      }\r\n      frontScore /= this.thetaArray.length;\r\n      return frontScore;\r\n    },\r\n    calculateBackScore(){\r\n      let backScore = 0;\r\n\r\n      for(let i=0; i<this.thetaArray.length; i++){\r\n        let thetaBackScore = 0;\r\n        let phiBackScore = 0;\r\n\r\n        if(Math.abs(this.thetaArray[i]) > 0.5){\r\n          thetaBackScore = -Math.cos(this.thetaArray[i]*Math.PI);\r\n        }\r\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\r\n          phiBackScore = Math.sin(this.phiArray[i]*Math.PI);\r\n        }\r\n        backScore += thetaBackScore * phiBackScore;\r\n      }\r\n      backScore /= this.thetaArray.length;\r\n      return backScore;\r\n    },\r\n    calculateRightScore(){\r\n      let rightScore = 0;\r\n\r\n      for(let i=0; i<this.thetaArray.length; i++){\r\n        let thetaRightScore = 0;\r\n        let phiRightScore = 0;\r\n\r\n        if(this.thetaArray[i] > 0){\r\n          thetaRightScore = Math.sin(this.thetaArray[i]*Math.PI);\r\n        }\r\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\r\n          phiRightScore = Math.sin(this.phiArray[i]*Math.PI);\r\n        }\r\n        rightScore += thetaRightScore * phiRightScore;\r\n      }\r\n      rightScore /= this.thetaArray.length;\r\n      return rightScore;\r\n    },\r\n    calculateLeftScore(){\r\n      let leftScore = 0;\r\n\r\n      for(let i=0; i<this.thetaArray.length; i++){\r\n        let thetaLeftScore = 0;\r\n        let phiLeftScore = 0;\r\n\r\n        if(this.thetaArray[i] < 0){\r\n          thetaLeftScore = -Math.sin(this.thetaArray[i]*Math.PI);\r\n        }\r\n        if(Math.abs(this.phiArray[i]) > 0 && Math.abs(this.phiArray[i])< 1){\r\n          phiLeftScore = Math.sin(this.phiArray[i]*Math.PI);\r\n        }\r\n        leftScore += thetaLeftScore * phiLeftScore;\r\n        console.log(this.thetaArray[i]);\r\n      }\r\n      leftScore /= this.thetaArray.length;\r\n\r\n      return leftScore;\r\n    },\r\n    calculateUpDownScore(){\r\n      let upScore = 0;\r\n      let downScore = 0;\r\n\r\n      for(let i=0; i<this.phiArray.length; i++){\r\n        if(Math.abs(this.phiArray[i]) < 0.5){\r\n          upScore += Math.cos(this.phiArray[i]*Math.PI);\r\n        }\r\n        else{\r\n          downScore -= Math.cos(this.phiArray[i]*Math.PI);\r\n        }\r\n      }\r\n      upScore /= this.phiArray.length;\r\n      downScore /= this.phiArray.length;\r\n\r\n      return [upScore, downScore];\r\n    },\r\n    scoreToColor(){\r\n      const maxScore = Math.max(this.scores[0].value, this.scores[1].value, this.scores[2].value, this.scores[3].value, this.scores[4].value, this.scores[5].value);\r\n\r\n      for(let i = 0; i < this.scores.length; i++){\r\n        const score = this.scores[i].value/maxScore;\r\n        let r = 0;\r\n        let g = 0;\r\n        let b = 0;\r\n\r\n        if(score >= 0.5){\r\n          r = 255 * (2*score - 1);\r\n        }\r\n        if(score >= 0.25 && score <= 0.5){\r\n          g = 255 * 2*score;\r\n        }\r\n        else if(score > 0.5 && score <= 0.75){\r\n          g = 255 * (-2*score + 2);\r\n        }\r\n        if(score <= 0.5){\r\n          b = 255 * (-2*score + 1);\r\n        }\r\n        this.scores[i].color = [Math.floor(r), Math.floor(g), Math.floor(b)];\r\n      }\r\n    },\r\n    setMaterialColor(){\r\n      const modelviewer01 = document.querySelector('model-viewer#heat-map-3d-demo');\r\n      for(let i=0; i<modelviewer01.model.materials.length; i++){\r\n        const flontMaterial = modelviewer01.model.materials[i];\r\n        flontMaterial.pbrMetallicRoughness.setBaseColorFactor([this.scores[i].color[0]/255,this.scores[i].color[1]/255,this.scores[i].color[2]/255]);\r\n      }\r\n    },\r\n    NormalizeScore(){\r\n      let TotalScore = 0;\r\n      for(let i = 0; i < this.scores.length; i++){\r\n        TotalScore += this.scores[i].value;\r\n      }\r\n      for(let i = 0; i < this.scores.length; i++){\r\n        this.scores[i].value = Math.floor(this.scores[i].value/TotalScore * 100);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.isMounted = true;\r\n    this.loadComponent();\r\n  },\r\n  computed: {\r\n    loadComponent() {\r\n      return () => import('@google/model-viewer');\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n%container{\r\n  width: 1284px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.page-title{\r\n  @extend %container;\r\n  padding: 0 40px;\r\n}\r\n\r\n// 技術紹介\r\n.introduction{\r\n  @extend %container;\r\n  padding: 0 40px;\r\n}\r\n\r\n.introduction-top-wrapper{\r\n  display: flex;\r\n  column-gap: 80px;\r\n}\r\n\r\n.model-viewer{\r\n  width: 400px;\r\n  height: 400px;\r\n  border: 1px solid #eee;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.introduction-btn-wrapper{\r\n  width: 400px;\r\n  padding: 20px 0;\r\n  border: 1px solid #000;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  column-gap: 30px;\r\n}\r\n\r\n.introduction-btn{\r\n  font-size: 1.4rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n\r\n.introduction-score-list{\r\n  display: flex;\r\n  flex-direction: column;\r\n  row-gap: 10px;\r\n  font-size: 1.4rem;\r\n  text-align: left;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeatMap3d.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeatMap3d.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeatMap3d.vue?vue&type=template&id=2204208e&scoped=true&\"\nimport script from \"./HeatMap3d.vue?vue&type=script&lang=js&\"\nexport * from \"./HeatMap3d.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeatMap3d.vue?vue&type=style&index=0&id=2204208e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2204208e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","isMounted","attrs","_e","on","$event","startMeasuremunt","stopMeasuremunt","_l","scores","score","key","class","tag","_s","color","name","value","staticRenderFns","data","timer","deltaTime","thetaArray","phiArray","methods","clearInterval","getCameraLocation","convertAngle","angle","calculateFrontScore","thetaFrontScore","phiFrontScore","frontScore","calculateBackScore","thetaBackScore","phiBackScore","backScore","calculateRightScore","thetaRightScore","phiRightScore","rightScore","calculateLeftScore","thetaLeftScore","phiLeftScore","leftScore","console","calculateUpDownScore","upScore","downScore","scoreToColor","r","g","b","setMaterialColor","flontMaterial","NormalizeScore","TotalScore","mounted","computed","loadComponent","component"],"sourceRoot":""}